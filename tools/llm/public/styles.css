*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #f5f7ff;
  background-color: #0b1020; /* fallback behind image */
  background-image: url("./bg.png");
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
  background-attachment: fixed;
}

.page {
  max-width: 960px;
  margin: 0 auto;
  padding: 16px;
}

.main-layout {
  /* Single-column layout for the main chat area. */
  display: block;
  margin-bottom: 16px;
}

.header {
  position: sticky;
  top: 0;
  z-index: 10;
  margin-bottom: 16px;
  padding: 8px 10px 10px 10px;
  border-radius: 12px;
  background: linear-gradient(
    135deg,
    rgba(11, 16, 32, 0.96),
    rgba(20, 30, 60, 0.96)
  );
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(10px);
}

.header h1 {
  margin: 0 0 4px 0;
  font-size: 1.6rem;
}

.header p {
  margin: 0;
  color: #c2c6dd;
  font-size: 0.95rem;
}

.header-controls {
  margin-top: 6px;
  display: flex;
  justify-content: center;
}

.input-section {
  display: grid;
  grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.3fr) minmax(0, 1.5fr);
  gap: 12px;
  align-items: stretch;
  max-height: 1000px;
  overflow: hidden;
  transition: max-height 0.25s ease, opacity 0.25s ease, transform 0.25s ease;
}

.header--collapsed .input-section {
  max-height: 0;
  opacity: 0;
  transform: translateY(-6px);
}

.pgn-upload,
.pgn-preview {
  background: #171e38;
  border-radius: 8px;
  padding: 12px;
}

.pgn-board-container {
  position: relative;
  margin-bottom: 8px;
  max-width: 260px;
  margin-left: auto;
  margin-right: auto;
}

.pgn-last-move-arrow {
  position: absolute;
  pointer-events: none;
  z-index: 2;
}

.pgn-board-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  margin-top: 6px;
}

.pgn-board-controls button {
  padding: 2px 6px;
  font-size: 0.75rem;
  border-radius: 4px;
}

.pgn-move-info {
  font-size: 0.75rem;
  color: #c2c6dd;
  padding: 0 4px;
}

.chess-board {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  width: 100%;
  max-width: 100%;
  border-radius: 6px;
  overflow: hidden;
  border: 1px solid #293152;
  background: #0f1528;
}

.chess-square {
  display: flex;
  align-items: center;
  justify-content: center;
  /* Make each cell a square regardless of content. */
  aspect-ratio: 1;
  line-height: 1;
}

.chess-square--light {
  background: #f0d9b5; /* warm light square */
  color: #111420;
}

.chess-square--dark {
  background: #b58863; /* warm dark square */
  color: #080c18;
}

/* Generic piece rendering: center a sprite image in each occupied square. */
.chess-square[class*="piece-"] {
  background-repeat: no-repeat;
  background-position: center;
  background-size: 80% 80%;
}

/* Wikipedia-style piece set from chessboardjs.com */
.chess-square.piece-wP {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wP.png");
}
.chess-square.piece-wN {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wN.png");
}
.chess-square.piece-wB {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wB.png");
}
.chess-square.piece-wR {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wR.png");
}
.chess-square.piece-wQ {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wQ.png");
}
.chess-square.piece-wK {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/wK.png");
}
.chess-square.piece-bP {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bP.png");
}
.chess-square.piece-bN {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bN.png");
}
.chess-square.piece-bB {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bB.png");
}
.chess-square.piece-bR {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bR.png");
}
.chess-square.piece-bQ {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bQ.png");
}
.chess-square.piece-bK {
  background-image: url("https://chessboardjs.com/img/chesspieces/wikipedia/bK.png");
}

.board-caption {
  margin-top: 4px;
  font-size: 0.8rem;
  color: #c2c6dd;
}

label {
  display: block;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #a7b0d4;
  margin-bottom: 6px;
}

input[type="file"] {
  width: 100%;
  font-size: 0.9rem;
}

.hint {
  display: block;
  margin-top: 6px;
  font-size: 0.8rem;
  color: #7780a5;
}

.personality-row {
  margin-top: 12px;
}

.llm-source-row {
  margin-top: 12px;
}

.llm-lan-row {
  margin-top: 8px;
}

.llm-lan-row--hidden {
  display: none;
}

.llm-lan-fields {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.llm-lan-fields input {
  flex: 1;
  border-radius: 6px;
  border: 1px solid #293152;
  background: #0f1528;
  color: #f5f7ff;
  padding: 6px 8px;
  font-size: 0.85rem;
}

.llm-lan-fields input::placeholder {
  color: #7780a5;
}

select {
  width: 100%;
  border-radius: 6px;
  border: 1px solid #293152;
  background: #0f1528;
  color: #f5f7ff;
  padding: 6px 8px;
  font-size: 0.9rem;
}

select:focus {
  outline: none;
  border-color: #4f9dff;
  box-shadow: 0 0 0 1px rgba(79, 157, 255, 0.4);
}

textarea {
  width: 100%;
  min-height: 120px;
  border-radius: 6px;
  border: 1px solid #293152;
  background: #0f1528;
  color: #f5f7ff;
  padding: 8px;
  resize: vertical;
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;
  font-size: 0.85rem;
}

textarea:focus {
  outline: none;
  border-color: #4f9dff;
  box-shadow: 0 0 0 1px rgba(79, 157, 255, 0.4);
}

/* PGN plaintext box: make it taller for comfortable reading. */
#pgnPreview {
  min-height: 380px;
}

.chat-section {
  background: #171e38;
  border-radius: 8px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 260px;
}

.chat-log {
  flex: 1;
  overflow-y: auto;
  border-radius: 6px;
  padding: 8px;
  background: #0f1528;
  border: 1px solid #293152;
}

.reasoning-section {
  margin-top: 8px;
  background: #171e38;
  border-radius: 8px;
  padding: 8px 12px 10px 12px;
}

.reasoning-log {
  margin-top: 6px;
  max-height: 160px;
  overflow-y: auto;
  border-radius: 6px;
  padding: 8px;
  background: #0f1528;
  border: 1px solid #293152;
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco,
    Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.8rem;
  line-height: 1.4;
  white-space: pre-wrap;
  color: #e0e3ff;
}

.msg {
  margin-bottom: 6px;
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 0.88rem;
  line-height: 1.35;
  white-space: pre-wrap;
}

.msg-user {
  background: #204478;
  align-self: flex-end;
}

.msg-coach {
  background: #243152;
}

.msg-system {
  background: #3a2548;
  color: #f3d2ff;
  font-style: italic;
}

.chat-input {
  display: flex;
  gap: 8px;
  align-items: flex-end;
}

.chat-input textarea {
  min-height: 60px;
}

button {
  border: none;
  border-radius: 6px;
  padding: 8px 14px;
  background: #4f9dff;
  color: #080c18;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.9rem;
  white-space: nowrap;
}

button:hover:enabled {
  background: #71b2ff;
}

button:disabled {
  opacity: 0.6;
  cursor: default;
}

.header-toggle {
  padding: 4px 10px;
  font-size: 0.75rem;
  border-radius: 999px;
  background: rgba(15, 21, 40, 0.9);
  color: #e0e3ff;
  border: 1px solid #3b4a7a;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.4);
}

.header-toggle:hover:enabled {
  background: rgba(21, 30, 60, 0.95);
}

.header-toggle::before {
  content: "▾ ";
  font-size: 0.8em;
}

.header--collapsed .header-toggle::before {
  content: "▴ ";
}

.status {
  min-height: 18px;
  font-size: 0.8rem;
  color: #c2c6dd;
}

@media (max-width: 720px) {
  .input-section {
    grid-template-columns: minmax(0, 1fr);
  }
}


